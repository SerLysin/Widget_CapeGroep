import { useState, useRef, useEffect, createElement } from 'react';

const localStorageKey = 'chatMessages';
function Test({ initialGreeting, result, userInput, onUserInputChange, systemResponse }) {
    const [messages, setMessages] = useState([]);
    const messagesEndRef = useRef(null);
    const [isChatOpen, setIsChatOpen] = useState(false); // State to track chat visibility
    useEffect(() => {
        var _a;
        // Scroll to the latest message
        (_a = messagesEndRef.current) === null || _a === void 0 ? void 0 : _a.scrollIntoView({ behavior: 'smooth' });
    }, [messages]);
    useEffect(() => {
        // Load chat messages from localStorage
        const savedMessages = localStorage.getItem(localStorageKey);
        if (savedMessages) {
            setMessages(JSON.parse(savedMessages));
        }
        else {
            // Initialize with an optional initial greeting if provided through props
            const welcomeMessage = { text: initialGreeting || "Hello! How can I help you today?", sender: "system" };
            setMessages([welcomeMessage]);
            localStorage.setItem(localStorageKey, JSON.stringify([welcomeMessage])); // Save initial message to localStorage
        }
    }, [initialGreeting]);
    const saveMessagesToStorage = (updatedMessages) => {
        localStorage.setItem(localStorageKey, JSON.stringify(updatedMessages));
    };
    const handleInputChange = (event) => {
        // Update local state to reflect user's input
        userInput === null || userInput === void 0 ? void 0 : userInput.setValue(event.target.value);
        result.setValue(event.target.value); //user input to mendix
    };
    const handleUserInput = (event) => {
        var _a;
        const input = (_a = userInput === null || userInput === void 0 ? void 0 : userInput.value) !== null && _a !== void 0 ? _a : "";
        if (event.key === "Enter" && input.trim()) {
            displayUserMessage(input.trim());
            userInput === null || userInput === void 0 ? void 0 : userInput.setValue("");
            if ((onUserInputChange === null || onUserInputChange === void 0 ? void 0 : onUserInputChange.canExecute) && !onUserInputChange.isExecuting) {
                onUserInputChange === null || onUserInputChange === void 0 ? void 0 : onUserInputChange.execute();
            }
        }
    };
    useEffect(() => {
        var _a;
        if (isChatOpen) {
            // Scroll to the latest message only if the chat is open
            (_a = messagesEndRef.current) === null || _a === void 0 ? void 0 : _a.scrollIntoView({ behavior: 'smooth' });
        }
    }, [messages, isChatOpen]);
    useEffect(() => {
        if (systemResponse === null || systemResponse === void 0 ? void 0 : systemResponse.value) {
            // `systemResponse` has been updated, display the system message
            displaySystemMessage(systemResponse.value);
        }
    }, [systemResponse === null || systemResponse === void 0 ? void 0 : systemResponse.value]); // Only re-run the effect if `systemResponse.value` changes
    const displayUserMessage = (message) => {
        setMessages(prevMessages => {
            const updatedMessages = [...prevMessages, { text: message, sender: "user" }];
            saveMessagesToStorage(updatedMessages);
            return updatedMessages;
        });
    };
    const displaySystemMessage = (message) => {
        setMessages(prevMessages => {
            const updatedMessages = [...prevMessages, { text: message, sender: "system" }];
            saveMessagesToStorage(updatedMessages);
            return updatedMessages;
        });
    };
    const renderMessages = () => messages.map((message, index) => (createElement("div", { key: index, className: `chat-message ${message.sender === "user" ? "user-message" : "system-message"}` }, message.text)));
    const toggleChat = () => {
        setIsChatOpen(!isChatOpen);
        if (!isChatOpen) {
            setTimeout(() => {
                var _a;
                (_a = messagesEndRef.current) === null || _a === void 0 ? void 0 : _a.scrollIntoView({ behavior: 'smooth' });
            }, 0);
        }
    };
    const renderChatToggleButton = () => {
        if (!isChatOpen) {
            return createElement("button", {
                className: "chat-toggle",
                onClick: toggleChat,
                "aria-label": "Open Chat"
            }, "+" // Replace with your icon if needed
            );
        }
        return null; // Don't render the button when the chat is open
    };
    const renderChat = () => {
        return createElement("div", { className: `chatbot-widget ${isChatOpen ? 'open' : ''}` }, createElement("div", { className: "chat-header" }, "Cape Groep Assistant", createElement("button", {
            className: "collapse-button",
            onClick: toggleChat,
            "aria-label": "Collapse Chat"
        })), createElement("div", { className: "chat-body", style: { overflowY: 'auto', maxHeight: '300px' } }, renderMessages(), createElement("div", { ref: messagesEndRef })), createElement("input", {
            type: "text",
            className: "user-input",
            placeholder: "Type a message...",
            value: userInput === null || userInput === void 0 ? void 0 : userInput.value,
            onChange: handleInputChange,
            onKeyPress: handleUserInput
        }));
    };
    return createElement("div", { className: "chat-container" }, renderChatToggleButton(), isChatOpen ? renderChat() : null);
}

export { Test };
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiVGVzdC5tanMiLCJzb3VyY2VzIjpbIi4uLy4uLy4uLy4uLy4uL3NyYy9UZXN0LnRzeCJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBjcmVhdGVFbGVtZW50LCBSZWFjdEVsZW1lbnQsIHVzZVN0YXRlLCBLZXlib2FyZEV2ZW50LCB1c2VFZmZlY3QsIENoYW5nZUV2ZW50LCB1c2VSZWYgfSBmcm9tIFwicmVhY3RcIjtcbmltcG9ydCB7IFRlc3RDb250YWluZXJQcm9wcyB9IGZyb20gXCIuLi90eXBpbmdzL1Rlc3RQcm9wc1wiO1xuaW1wb3J0IFwiLi91aS9UZXN0LmNzc1wiO1xuXG5pbnRlcmZhY2UgQ2hhdE1lc3NhZ2Uge1xuICB0ZXh0OiBzdHJpbmc7XG4gIHNlbmRlcjogXCJ1c2VyXCIgfCBcInN5c3RlbVwiO1xufVxuICBcbmNvbnN0IGxvY2FsU3RvcmFnZUtleSA9ICdjaGF0TWVzc2FnZXMnO1xuXG5leHBvcnQgZnVuY3Rpb24gVGVzdCh7IGluaXRpYWxHcmVldGluZywgcmVzdWx0LCB1c2VySW5wdXQsIG9uVXNlcklucHV0Q2hhbmdlLCBzeXN0ZW1SZXNwb25zZSB9OiBUZXN0Q29udGFpbmVyUHJvcHMpOiBSZWFjdEVsZW1lbnQge1xuICAgIGNvbnN0IFttZXNzYWdlcywgc2V0TWVzc2FnZXNdID0gdXNlU3RhdGU8Q2hhdE1lc3NhZ2VbXT4oW10pO1xuICAgIGNvbnN0IG1lc3NhZ2VzRW5kUmVmID0gdXNlUmVmPEhUTUxEaXZFbGVtZW50PihudWxsKTtcbiAgICBjb25zdCBbaXNDaGF0T3Blbiwgc2V0SXNDaGF0T3Blbl0gPSB1c2VTdGF0ZShmYWxzZSk7IC8vIFN0YXRlIHRvIHRyYWNrIGNoYXQgdmlzaWJpbGl0eVxuXG5cbiAgICB1c2VFZmZlY3QoKCkgPT4ge1xuICAgICAgICAvLyBTY3JvbGwgdG8gdGhlIGxhdGVzdCBtZXNzYWdlXG4gICAgICAgIG1lc3NhZ2VzRW5kUmVmLmN1cnJlbnQ/LnNjcm9sbEludG9WaWV3KHsgYmVoYXZpb3I6ICdzbW9vdGgnIH0pO1xuICAgIH0sIFttZXNzYWdlc10pO1xuXG4gICAgdXNlRWZmZWN0KCgpID0+IHtcbiAgICAgIC8vIExvYWQgY2hhdCBtZXNzYWdlcyBmcm9tIGxvY2FsU3RvcmFnZVxuICAgICAgY29uc3Qgc2F2ZWRNZXNzYWdlcyA9IGxvY2FsU3RvcmFnZS5nZXRJdGVtKGxvY2FsU3RvcmFnZUtleSk7XG4gICAgICBpZiAoc2F2ZWRNZXNzYWdlcykge1xuICAgICAgICAgIHNldE1lc3NhZ2VzKEpTT04ucGFyc2Uoc2F2ZWRNZXNzYWdlcykpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAvLyBJbml0aWFsaXplIHdpdGggYW4gb3B0aW9uYWwgaW5pdGlhbCBncmVldGluZyBpZiBwcm92aWRlZCB0aHJvdWdoIHByb3BzXG4gICAgICAgICAgY29uc3Qgd2VsY29tZU1lc3NhZ2U6IENoYXRNZXNzYWdlID0geyB0ZXh0OiBpbml0aWFsR3JlZXRpbmcgfHwgXCJIZWxsbyEgSG93IGNhbiBJIGhlbHAgeW91IHRvZGF5P1wiLCBzZW5kZXI6IFwic3lzdGVtXCIgfTtcbiAgICAgICAgICBzZXRNZXNzYWdlcyhbd2VsY29tZU1lc3NhZ2VdKTtcbiAgICAgICAgICBsb2NhbFN0b3JhZ2Uuc2V0SXRlbShsb2NhbFN0b3JhZ2VLZXksIEpTT04uc3RyaW5naWZ5KFt3ZWxjb21lTWVzc2FnZV0pKTsgLy8gU2F2ZSBpbml0aWFsIG1lc3NhZ2UgdG8gbG9jYWxTdG9yYWdlXG4gICAgICB9XG4gIH0sIFtpbml0aWFsR3JlZXRpbmddKTtcblxuICBjb25zdCBzYXZlTWVzc2FnZXNUb1N0b3JhZ2UgPSAodXBkYXRlZE1lc3NhZ2VzOiBDaGF0TWVzc2FnZVtdKSA9PiB7XG4gICAgbG9jYWxTdG9yYWdlLnNldEl0ZW0obG9jYWxTdG9yYWdlS2V5LCBKU09OLnN0cmluZ2lmeSh1cGRhdGVkTWVzc2FnZXMpKTtcbn07XG5cbiAgY29uc3QgaGFuZGxlSW5wdXRDaGFuZ2UgPSAoZXZlbnQ6IENoYW5nZUV2ZW50PEhUTUxJbnB1dEVsZW1lbnQ+KSA9PiB7XG4gICAgLy8gVXBkYXRlIGxvY2FsIHN0YXRlIHRvIHJlZmxlY3QgdXNlcidzIGlucHV0XG4gICAgXG4gICAgdXNlcklucHV0Py5zZXRWYWx1ZShldmVudC50YXJnZXQudmFsdWUpO1xuICAgIHJlc3VsdC5zZXRWYWx1ZShldmVudC50YXJnZXQudmFsdWUpIC8vdXNlciBpbnB1dCB0byBtZW5kaXhcbiAgfTtcblxuICBjb25zdCBoYW5kbGVVc2VySW5wdXQgPSAoZXZlbnQ6IEtleWJvYXJkRXZlbnQ8SFRNTElucHV0RWxlbWVudD4pID0+IHtcbiAgICAgY29uc3QgaW5wdXQgPSB1c2VySW5wdXQ/LnZhbHVlID8/IFwiXCI7XG5cbiAgICBpZiAoZXZlbnQua2V5ID09PSBcIkVudGVyXCIgJiYgaW5wdXQudHJpbSgpKSB7XG5cbiAgICAgICAgZGlzcGxheVVzZXJNZXNzYWdlKGlucHV0LnRyaW0oKSk7XG5cbiAgICAgICAgdXNlcklucHV0Py5zZXRWYWx1ZShcIlwiKVxuXG4gICAgICAgIGlmKG9uVXNlcklucHV0Q2hhbmdlPy5jYW5FeGVjdXRlICYmICFvblVzZXJJbnB1dENoYW5nZS5pc0V4ZWN1dGluZyl7XG4gICAgICAgICAgICBvblVzZXJJbnB1dENoYW5nZT8uZXhlY3V0ZSgpO1xuICAgICAgICB9ICAgICAgICBcbiAgICB9XG4gIH07XG4gIHVzZUVmZmVjdCgoKSA9PiB7XG4gICAgaWYgKGlzQ2hhdE9wZW4pIHtcbiAgICAgICAgLy8gU2Nyb2xsIHRvIHRoZSBsYXRlc3QgbWVzc2FnZSBvbmx5IGlmIHRoZSBjaGF0IGlzIG9wZW5cbiAgICAgICAgbWVzc2FnZXNFbmRSZWYuY3VycmVudD8uc2Nyb2xsSW50b1ZpZXcoeyBiZWhhdmlvcjogJ3Ntb290aCcgfSk7XG4gICAgfVxufSwgW21lc3NhZ2VzLCBpc0NoYXRPcGVuXSk7IFxuXG5cbnVzZUVmZmVjdCgoKSA9PiB7XG4gICAgaWYgKHN5c3RlbVJlc3BvbnNlPy52YWx1ZSkge1xuICAgICAgICAvLyBgc3lzdGVtUmVzcG9uc2VgIGhhcyBiZWVuIHVwZGF0ZWQsIGRpc3BsYXkgdGhlIHN5c3RlbSBtZXNzYWdlXG4gICAgICAgIGRpc3BsYXlTeXN0ZW1NZXNzYWdlKHN5c3RlbVJlc3BvbnNlLnZhbHVlKTtcbiAgICB9XG59LCBbc3lzdGVtUmVzcG9uc2U/LnZhbHVlXSk7IC8vIE9ubHkgcmUtcnVuIHRoZSBlZmZlY3QgaWYgYHN5c3RlbVJlc3BvbnNlLnZhbHVlYCBjaGFuZ2VzXG5cbmNvbnN0IGRpc3BsYXlVc2VyTWVzc2FnZSA9IChtZXNzYWdlOiBzdHJpbmcpID0+IHtcbiAgc2V0TWVzc2FnZXMocHJldk1lc3NhZ2VzID0+IHtcbiAgICBjb25zdCB1cGRhdGVkTWVzc2FnZXMgPSBbLi4ucHJldk1lc3NhZ2VzLCB7IHRleHQ6IG1lc3NhZ2UsIHNlbmRlcjogXCJ1c2VyXCIgYXMgXCJ1c2VyXCIgfCBcInN5c3RlbVwiIH1dO1xuICAgIHNhdmVNZXNzYWdlc1RvU3RvcmFnZSh1cGRhdGVkTWVzc2FnZXMpO1xuICAgIHJldHVybiB1cGRhdGVkTWVzc2FnZXM7XG4gIH0pO1xufTtcblxuY29uc3QgZGlzcGxheVN5c3RlbU1lc3NhZ2UgPSAobWVzc2FnZTogc3RyaW5nKSA9PiB7XG4gIHNldE1lc3NhZ2VzKHByZXZNZXNzYWdlcyA9PiB7XG4gICAgY29uc3QgdXBkYXRlZE1lc3NhZ2VzID0gWy4uLnByZXZNZXNzYWdlcywgeyB0ZXh0OiBtZXNzYWdlLCBzZW5kZXI6IFwic3lzdGVtXCIgYXMgXCJ1c2VyXCIgfCBcInN5c3RlbVwiIH1dO1xuICAgIHNhdmVNZXNzYWdlc1RvU3RvcmFnZSh1cGRhdGVkTWVzc2FnZXMpO1xuICAgIHJldHVybiB1cGRhdGVkTWVzc2FnZXM7XG4gIH0pO1xufTtcblxuICBjb25zdCByZW5kZXJNZXNzYWdlcyA9ICgpID0+IG1lc3NhZ2VzLm1hcCgobWVzc2FnZSwgaW5kZXgpID0+IChcbiAgICA8ZGl2IGtleT17aW5kZXh9IGNsYXNzTmFtZT17YGNoYXQtbWVzc2FnZSAke21lc3NhZ2Uuc2VuZGVyID09PSBcInVzZXJcIiA/IFwidXNlci1tZXNzYWdlXCIgOiBcInN5c3RlbS1tZXNzYWdlXCJ9YH0+XG4gICAgICB7bWVzc2FnZS50ZXh0fVxuICAgIDwvZGl2PlxuICApKTtcblxuICBjb25zdCB0b2dnbGVDaGF0ID0gKCkgPT4ge1xuICAgIHNldElzQ2hhdE9wZW4oIWlzQ2hhdE9wZW4pO1xuICAgIGlmICghaXNDaGF0T3Blbikge1xuICAgICAgICBzZXRUaW1lb3V0KCgpID0+IHtcbiAgICAgICAgICAgIG1lc3NhZ2VzRW5kUmVmLmN1cnJlbnQ/LnNjcm9sbEludG9WaWV3KHsgYmVoYXZpb3I6ICdzbW9vdGgnIH0pO1xuICAgICAgICB9LCAwKTtcbiAgICB9XG59O1xuXG4gIGNvbnN0IHJlbmRlckNoYXRUb2dnbGVCdXR0b24gPSAoKSA9PiB7XG4gICAgaWYgKCFpc0NoYXRPcGVuKSB7XG4gICAgICAgIHJldHVybiBjcmVhdGVFbGVtZW50KFxuICAgICAgICAgICAgXCJidXR0b25cIixcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICBjbGFzc05hbWU6IFwiY2hhdC10b2dnbGVcIixcbiAgICAgICAgICAgICAgICBvbkNsaWNrOiB0b2dnbGVDaGF0LFxuICAgICAgICAgICAgICAgIFwiYXJpYS1sYWJlbFwiOiBcIk9wZW4gQ2hhdFwiXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgXCIrXCIgLy8gUmVwbGFjZSB3aXRoIHlvdXIgaWNvbiBpZiBuZWVkZWRcbiAgICAgICAgKTtcbiAgICB9XG4gICAgcmV0dXJuIG51bGw7IC8vIERvbid0IHJlbmRlciB0aGUgYnV0dG9uIHdoZW4gdGhlIGNoYXQgaXMgb3BlblxufTtcblxuY29uc3QgcmVuZGVyQ2hhdCA9ICgpID0+IHtcbiAgcmV0dXJuIGNyZWF0ZUVsZW1lbnQoXG4gICAgICBcImRpdlwiLCB7IGNsYXNzTmFtZTogYGNoYXRib3Qtd2lkZ2V0ICR7aXNDaGF0T3BlbiA/ICdvcGVuJyA6ICcnfWAgfSxcbiAgICAgIGNyZWF0ZUVsZW1lbnQoXG4gICAgICAgICAgXCJkaXZcIixcbiAgICAgICAgICB7IGNsYXNzTmFtZTogXCJjaGF0LWhlYWRlclwiIH0sXG4gICAgICAgICAgXCJDYXBlIEdyb2VwIEFzc2lzdGFudFwiLFxuICAgICAgICAgIGNyZWF0ZUVsZW1lbnQoXG4gICAgICAgICAgICAgIFwiYnV0dG9uXCIsXG4gICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZTogXCJjb2xsYXBzZS1idXR0b25cIixcbiAgICAgICAgICAgICAgICAgIG9uQ2xpY2s6IHRvZ2dsZUNoYXQsXG4gICAgICAgICAgICAgICAgICBcImFyaWEtbGFiZWxcIjogXCJDb2xsYXBzZSBDaGF0XCJcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgIClcbiAgICAgICksXG4gICAgICBjcmVhdGVFbGVtZW50KFxuICAgICAgICAgIFwiZGl2XCIsXG4gICAgICAgICAgeyBjbGFzc05hbWU6IFwiY2hhdC1ib2R5XCIsIHN0eWxlOiB7IG92ZXJmbG93WTogJ2F1dG8nLCBtYXhIZWlnaHQ6ICczMDBweCcgfSB9LFxuICAgICAgICAgIHJlbmRlck1lc3NhZ2VzKCksXG4gICAgICAgICAgY3JlYXRlRWxlbWVudChcImRpdlwiLCB7IHJlZjogbWVzc2FnZXNFbmRSZWYgfSlcbiAgICAgICksXG4gICAgICBjcmVhdGVFbGVtZW50KFwiaW5wdXRcIiwge1xuICAgICAgICAgIHR5cGU6IFwidGV4dFwiLFxuICAgICAgICAgIGNsYXNzTmFtZTogXCJ1c2VyLWlucHV0XCIsXG4gICAgICAgICAgcGxhY2Vob2xkZXI6IFwiVHlwZSBhIG1lc3NhZ2UuLi5cIixcbiAgICAgICAgICB2YWx1ZTogdXNlcklucHV0Py52YWx1ZSxcbiAgICAgICAgICBvbkNoYW5nZTogaGFuZGxlSW5wdXRDaGFuZ2UsXG4gICAgICAgICAgb25LZXlQcmVzczogaGFuZGxlVXNlcklucHV0XG4gICAgICB9KVxuICApO1xufTtcblxucmV0dXJuIGNyZWF0ZUVsZW1lbnQoXG4gIFwiZGl2XCIsIHsgY2xhc3NOYW1lOiBcImNoYXQtY29udGFpbmVyXCIgfSxcbiAgcmVuZGVyQ2hhdFRvZ2dsZUJ1dHRvbigpLFxuICBpc0NoYXRPcGVuID8gcmVuZGVyQ2hhdCgpIDogbnVsbFxuKTtcbn07XG4iXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7QUFTQSxNQUFNLGVBQWUsR0FBRyxjQUFjLENBQUM7QUFFdkIsU0FBQSxJQUFJLENBQUMsRUFBRSxlQUFlLEVBQUUsTUFBTSxFQUFFLFNBQVMsRUFBRSxpQkFBaUIsRUFBRSxjQUFjLEVBQXNCLEVBQUE7SUFDOUcsTUFBTSxDQUFDLFFBQVEsRUFBRSxXQUFXLENBQUMsR0FBRyxRQUFRLENBQWdCLEVBQUUsQ0FBQyxDQUFDO0FBQzVELElBQUEsTUFBTSxjQUFjLEdBQUcsTUFBTSxDQUFpQixJQUFJLENBQUMsQ0FBQztBQUNwRCxJQUFBLE1BQU0sQ0FBQyxVQUFVLEVBQUUsYUFBYSxDQUFDLEdBQUcsUUFBUSxDQUFDLEtBQUssQ0FBQyxDQUFDO0lBR3BELFNBQVMsQ0FBQyxNQUFLOzs7QUFFWCxRQUFBLENBQUEsRUFBQSxHQUFBLGNBQWMsQ0FBQyxPQUFPLE1BQUEsSUFBQSxJQUFBLEVBQUEsS0FBQSxLQUFBLENBQUEsR0FBQSxLQUFBLENBQUEsR0FBQSxFQUFBLENBQUUsY0FBYyxDQUFDLEVBQUUsUUFBUSxFQUFFLFFBQVEsRUFBRSxDQUFDLENBQUM7QUFDbkUsS0FBQyxFQUFFLENBQUMsUUFBUSxDQUFDLENBQUMsQ0FBQztJQUVmLFNBQVMsQ0FBQyxNQUFLOztRQUViLE1BQU0sYUFBYSxHQUFHLFlBQVksQ0FBQyxPQUFPLENBQUMsZUFBZSxDQUFDLENBQUM7QUFDNUQsUUFBQSxJQUFJLGFBQWEsRUFBRTtZQUNmLFdBQVcsQ0FBQyxJQUFJLENBQUMsS0FBSyxDQUFDLGFBQWEsQ0FBQyxDQUFDLENBQUM7QUFDMUMsU0FBQTtBQUFNLGFBQUE7O0FBRUgsWUFBQSxNQUFNLGNBQWMsR0FBZ0IsRUFBRSxJQUFJLEVBQUUsZUFBZSxJQUFJLGtDQUFrQyxF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
